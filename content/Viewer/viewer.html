<!DOCTYPE html>
<html lang="en" ng-app="App">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="/app/lib/angular.min.js"></script>
    <script type="module" src="../Controller/ControlTable.js"></script>
    <script type="module" src="../Controller/controlForms.js"></script>
    <title>Books app</title>
  </head>
  <body>
    <div id="to_float">
      <div id="left">
        <div>
          <button data-bind="click: search('search_menu')">Wyszukiwanie</button>
          <div ng-controller="getController">
            <div>
              <h3>Get by chosen genre</h3>
              <form ng-submit="getByGenre()">
                <label for="genre_find">Gatunek:</label>
                <input
                  type="text"
                  id="genre_find"
                  ng-model="genreData.genre"
                  required
                />
                <button type="submit">Wyszukaj</button>
                <div class="error" id="get_genre_error">
                  Nie ma książki o takim gatunku
                </div>
              </form>
            </div>
            <div id="get_author_form">
              <h3>Get by chosen author</h3>
              <form ng-submit="getByAuthor()">
                <label for="author_find">Autor:</label>
                <input
                  type="text"
                  id="author_find"
                  ng-model="authorData.author"
                />
                <button type="submit">Wyszukaj</button>
                <div class="error" id="get_author_error">
                  Nie ma książki z takim autorem
                </div>
              </form>
            </div>
            <div id="get_id_form">
              <h3>Get by chosen id</h3>
              <form ng-submit="getById()">
                <label for="id_find">Id:</label>
                <input type="text" id="id_find" ng-model="idData.id" />
                <button type="submit">Wyszukaj</button>
                <div class="error" id="get_id_error">
                  Nie ma książki o takim id
                </div>
              </form>
            </div>
          </div>

          <button data-bind="click: search('modify_menu')">Menu edycji</button>
          <div ng-controller="addController">
            <div id="add_form">
              <h3>Add book</h3>
              <form id="add" ng-submit="addBook()">
                <label for="title">Tytuł:</label>
                <input type="text" id="title" ng-model="bookToAdd.title" />
                <label for="author">Autor:</label>
                <input type="text" id="author" ng-model="bookToAdd.author" />
                <label for="genre">Gatunek:</label>
                <input type="text" id="genre" ng-model="bookToAdd.genre" />
                <button type="submit">Dodaj</button>
                <div class="error" id="null_title">
                  Tytuł nie może być pusty
                </div>
                <div class="error" id="not_added">
                  Nie udało się dodać książki do bazy
                </div>
              </form>
            </div>
            <div id="update_form">
              <h3>Update book</h3>
              <form id="update" ng-submit="updateBook()">
                <label for="id">Id:</label>
                <input type="number" name="id" ng-model="bookToUpdate.id" />
                <label for="title">Tytuł:</label>
                <input type="text" name="title" ng-model="bookToUpdate.title" />
                <label for="author">Autor:</label>
                <input
                  type="text"
                  name="author"
                  ng-model="bookToUpdate.author"
                />
                <label for="genre">Gatunek:</label>
                <input type="text" name="genre" ng-model="bookToUpdate.genre" />
                <button type="submit">Aktualizuj</button>
                <div class="error" id="null_id">
                  Nie istnieje takie id w bazie
                </div>
                <div class="error" id="null_title_2">
                  Tytuł nie może być pusty
                </div>
              </form>
            </div>
          </div>
          <button data-bind="click: search('delete_menu')">Delete</button>
          <div id="delete_menu" ng-controller="deleteController">
            <button ng-click="deleteAllBooks()">Usuń wszystkie książki</button>
            <div class="error" id="not_deleted">
              Nie udało się usunąć wszystkich książek
            </div>
            <div id="delete_id_form">
              <h3>Delete by chosen id</h3>
              <form ng-submit="deleteById()">
                <label for="id">Id:</label>
                <input type="text" name="id" id="id" ng-model="bookId" />
                <button type="submit">Usuń</button>
                <div class="error" id="delete_id_error">
                  Nie ma książki o takim id
                </div>
              </form>
            </div>
            <div id="delete_genre_form">
              <h3>Delete by chosen genre</h3>
              <form ng-submit="deleteByGenre()">
                <label for="genre_delete">Gatunek:</label>
                <input
                  type="text"
                  name="genre"
                  id="genre_delete"
                  ng-model="bookGenre"
                />
                <button type="submit">Usuń</button>
                <div class="error" id="delete_genre_error">
                  Nie ma książki o takim gatunku
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>

      <div id="right">
        <table ng-controller="tableController">
          <thead>
            <td>Id</td>
            <td>Tytuł</td>
            <td>Autor</td>
            <td>Gatunek</td>
          </thead>
          <tbody ng-repeat="book in books">
            <td>{{book.id}}</td>
            <td>{{book.title}}</td>
            <td>{{book.author}}</td>
            <td>{{book.genre}}</td>
          </tbody>
        </table>
        <div ng-controller="pageSwappingController">
          <button ng-click="back()">right</button>
          <button ng-click="next()">left</button>
        </div>
      </div>
    </div>
  </body>
</html>
